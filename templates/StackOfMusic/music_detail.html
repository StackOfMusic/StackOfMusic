
{% extends 'StackOfMusic/base.html' %}
<!doctype html>
<html lang="ko">
<head>
    {% block extra_scripts %}
        <script src="https://unpkg.com/wavesurfer.js"></script>
        <section class="links">
            <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.1.10/wavesurfer.min.js"></script>
        </section>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>

        <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
        <!------ Include the above in your HEAD tag ---------->
    {% endblock %}
    {% block extra_style %}
        <style>
            rcorners1 {
                border-radius: 25px;
                background: #73AD21;
                padding: 20px;
                width: 200px;
                height: 150px;
            }

            .post-comments {
                padding-bottom: 9px;
                margin: 5px 0 5px;
            }

            .comments-nav {
                border-bottom: 1px solid #eee;
                margin-bottom: 5px;
            }

            .post-comments .comment-meta {
                border-bottom: 1px solid #eee;
                margin-bottom: 5px;
            }

            .post-comments .media {
                border-left: 1px dotted #000;
                border-bottom: 1px dotted #000;
                margin-bottom: 5px;
                padding-left: 10px;
            }

            .post-comments .media-heading {
                font-size: 12px;
                color: grey;
            }

            .post-comments .comment-meta a {
                font-size: 12px;
                color: grey;
                font-weight: bolder;
                margin-right: 5px;
            }

        </style>
    {% endblock %}
</head>
<body>
{% block content %}

    <script type="text/javascript">

        var completd_music = {};
        var wave = WaveSurfer;
        $(function () {
            $.ajax({
                method: 'GET',
                url: 'http://localhost:8000/RetrieveAPI/{{ completed_music_id }}',
                success: function (data) {
                    completd_music = data;
                    console.log(completd_music);
                    var titleContainer = document.getElementById("mytitle");
                    var ownerContainer = document.getElementById("myowner");
                    var dateContainer = document.getElementById("mydate");
                    var genreContainer = document.getElementById("mygenre");


                    dateContainer.append(completd_music['create_date']);
                    titleContainer.append(completd_music['title']);
                    ownerContainer.append(completd_music['owner'].username);
                    genreContainer.append(completd_music['genre'].name);


                    $('#music_image').attr("src", completd_music['album_jacket']);
                    $('#music').attr("src", completd_music['seed_file']);
                },
                error: function (error) {
                    alert(error + 'data를 불러올수없습니다.');
                },
                xhrFields: {withCredentials: true,}
            })

        });

        $(function () {
            $('#completed_music_img').attr("src", completd_music['album_jacket']);
        });
    </script>
    <img id="completed_music_img" src="" alt="">
    <div class="container">
        <div class="row well">
            <div class="col-md-12">
                <div class="panel">
                    <img id="music_image" src="" alt="" style="height:250px;width: 250px;float: left">
                    <div class="row user-left-part">
                        <div class="col-md-9 col-sm-9 col-xs-12 pull-right profile-right-section" style="height: 500px;">
                            <div class="row profile-right-section-row">
                                <div class="col-md-12 profile-header">
                                    <div class="row">
                                        <div class="col-md-8 col-sm-6 col-xs-6 profile-header-section1 pull-left">
                                            <h1><div id="mytitle" style="float: left;"></div></h1>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-8">
                                            <!-- Tab panes -->
                                            <div class="tab-content">
                                                <div role="tabpanel" class="tab-pane fade show active" id="profile">
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <label>genre</label>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <h4><div id="mygenre" style="float: left;margin-left: 20px;"></div></h4>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <label>Owner</label>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <h4><div id="myowner" style="float: left;margin-left: 20px;"></div></h4>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <label>발매날짜</label>
                                                        </div>
                                                        <div class="col-md-4">
                                                            <div id="mydate" style="float: left;margin-left: 20px;"></div>
                                                        </div>
                                                    </div>
                                                    <audio id="music" controls style="margin-top:20px;margin-left: 10px;">
                                                        <source id="audio-source" src="" type="audio/mp4"/>
                                                    </audio>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="container">
                                    <div class="post-comments">
                                        <form>
                                            <div class="form-group">
                                                <label for="comment">Your Comment</label>
                                                <textarea name="comment" class="form-control" rows="3"></textarea>
                                            </div>
                                            <button type="submit" class="btn btn-default">Send</button>
                                        </form>
                                    </div>
                                    <!-- post-comments -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


{% endblock %}
</body>
</html>